# 관리자 화면 기능 가이드

## 📋 개요

매일경제 신문기사 벡터임베딩 플랫폼의 관리자 화면은 8개의 주요 탭으로 구성되어 있으며, 각 탭은 특정 기능 영역을 담당합니다.

## 🎯 주요 탭 구성

### 1. 📊 대시보드
- **시스템 통계**: 총 기사, 처리된 기사, 임베딩된 기사, 최근 기사 수
- **벡터 인덱스 상태**: VertexAI Vector Search 상태 모니터링
- **처리 로그**: 최근 처리 작업 로그 조회
- **실시간 모니터링**: 30초마다 자동 새로고침

### 2. 📰 기사 관리
- **기사 검색**: 제목, 키워드 기반 검색
- **카테고리 필터**: 정치, 경제, 사회, 국제, 문화, 기술, 스포츠
- **날짜 범위 필터**: 특정 기간 기사 조회
- **검색 결과 표시**: 테이블 형태로 기사 목록 표시

### 3. 🔍 Hybrid RAG 검색 테스트 (고급 기능)
- **검색 설정**:
  - 검색 결과 수 (1-50개)
  - 유사도 임계값 (0.0-1.0)
  - 최대 컨텍스트 길이 (1000-8000자)

- **가중치 설정**:
  - 벡터 검색 가중치 (0.0-1.0)
  - 키워드 검색 가중치 (0.0-1.0)
  - 리랭킹 가중치 (0.0-1.0)

- **메타데이터 필터링**:
  - 카테고리 필터
  - 날짜 범위 필터
  - 작성자 필터
  - 고급 필터 옵션 (기사 길이, 이미지 포함, 주식 코드, 필수 키워드)

- **검색 결과 분석**:
  - 검색 결과 상세 테이블
  - 개별 기사 상세 정보
  - 검색 통계 (처리 시간, 컨텍스트 길이, 검색 결과 수)
  - 검색 품질 메트릭 (평균 유사도, 최고 유사도, 검색 다양성)
  - 가중치 효과 분석 차트

- **검색 히스토리**: 최근 검색 기록 조회

### 4. 📈 통계 분석
- **기사 통계 차트**:
  - 일별 기사 수 추이
  - 임베딩 상태 분포
  - 기사 요약 길이 분포
- **데이터 시각화**: Plotly 기반 인터랙티브 차트

### 5. ⚙️ 시스템 설정
- **벡터 인덱스 관리**:
  - 인덱스 생성
  - 인덱스 배포
  - 인덱스 상태 확인
- **시스템 정보**: 헬스 체크 및 시스템 상태

### 6. ☁️ GCP 인프라 관리 (신규)
- **GCP 인증 상태**:
  - 로그인 상태 확인
  - 현재 계정 표시
  - 인증 오류 처리

- **프로젝트 설정**:
  - GCP 프로젝트 ID 설정
  - GCP 리전 선택
  - Gemini API 키 설정 및 저장

- **GCP 서비스 관리**:
  - 필수 서비스 활성화 (Compute, SQL, AI Platform, Storage, Container)
  - 서비스별 활성화 상태 확인

- **인프라 배포**:
  - Terraform 초기화
  - Terraform 플랜 확인
  - 인프라 자동 배포
  - 배포 결과 확인

- **인프라 테스트**:
  - Cloud SQL 연결 테스트
  - Vertex AI 연결 테스트
  - 서비스별 연결 상태 확인

- **인프라 모니터링**:
  - Compute Engine 인스턴스 상태
  - Cloud SQL 인스턴스 상태
  - 리소스 사용량 모니터링

### 7. 📤 벡터임베딩 증분처리 (신규)
- **XML 파일 업로드**:
  - 다중 파일 업로드 지원
  - 파일 정보 표시 (이름, 크기)
  - 업로드된 파일 목록 확인

- **배치 처리 설정**:
  - 배치 크기 설정 (1-1000)
  - 최대 워커 수 설정 (1-10)
  - 임베딩 모델 선택

- **벡터임베딩 처리**:
  - XML 파일 벡터임베딩 배치 처리
  - 처리 진행 상황 모니터링
  - VertexAI Vector Search 반영

- **메타데이터 추출 및 인덱싱**:
  - 메타데이터 추출
  - 메타데이터 인덱싱
  - 처리 결과 모니터링

- **처리 결과 모니터링**:
  - 총 처리된 기사 수
  - 임베딩 완료 수
  - 메타데이터 추출 수
  - 인덱싱 완료 수

### 8. 🤖 개별기사 해설 생성 (신규)
- **기사 선택**:
  - 기사 검색 기능
  - 검색 결과에서 기사 선택
  - 선택된 기사 정보 표시

- **해설 생성 설정**:
  - 과거 타임라인 조회 년수 (1-10년)
  - 분석 깊이 선택 (기본, 상세, 심화)

- **해설 생성 옵션**:
  - 과거 타임라인 분석 (체크박스)
  - 현재 기사 논설 (체크박스)
  - 향후 전망 (체크박스)

- **해설 생성**:
  - AI 기반 해설 생성
  - 과거 타임라인 분석 결과
  - 현재 기사 논설 분석
  - 향후 전망 분석
  - 참조 기사 목록
  - 생성 통계 (처리 시간, 참조 기사 수, 분석 깊이)

- **해설 히스토리**:
  - 최근 해설 조회
  - 해설 생성 기록
  - 분석 유형별 분류

## 🔧 기술적 특징

### 1. 실시간 모니터링
- **자동 새로고침**: 30초마다 데이터 업데이트
- **진행 상황 표시**: 스피너 및 프로그레스 바
- **상태 알림**: 성공/오류 메시지 표시

### 2. 인터랙티브 UI
- **탭 기반 네비게이션**: 8개 주요 기능 탭
- **확장 가능한 섹션**: 상세 정보 접기/펼치기
- **동적 폼**: 조건부 입력 필드

### 3. 데이터 시각화
- **Plotly 차트**: 인터랙티브 그래프
- **실시간 통계**: 메트릭 카드
- **검색 결과 테이블**: 정렬 및 필터링 가능

### 4. 백그라운드 처리
- **비동기 작업**: FastAPI BackgroundTasks 활용
- **진행 상황 추적**: 실시간 상태 업데이트
- **오류 처리**: 예외 상황 자동 처리

## 🚀 사용 시나리오

### 시나리오 1: GCP 인프라 초기 설정
1. **GCP 인프라** 탭에서 로그인 상태 확인
2. 프로젝트 ID 및 리전 설정
3. Gemini API 키 입력 및 저장
4. 필수 서비스 활성화
5. Terraform 배포 실행
6. 인프라 연결 테스트

### 시나리오 2: XML 파일 벡터임베딩 처리
1. **벡터임베딩** 탭에서 XML 파일 업로드
2. 배치 처리 설정 조정
3. 벡터임베딩 배치 처리 시작
4. VertexAI Vector Search 반영
5. 메타데이터 추출 및 인덱싱
6. 처리 결과 모니터링

### 시나리오 3: Hybrid RAG 검색 테스트
1. **검색 테스트** 탭에서 질문 입력
2. 검색 설정 조정 (결과 수, 유사도 임계값)
3. 가중치 설정 (벡터/키워드/리랭킹)
4. 메타데이터 필터 설정
5. 검색 실행 및 결과 분석
6. 검색 품질 메트릭 확인

### 시나리오 4: 개별 기사 해설 생성
1. **개별기사 해설** 탭에서 기사 검색
2. 원하는 기사 선택
3. 해설 생성 설정 조정
4. 해설 생성 옵션 선택
5. AI 해설 생성 실행
6. 해설 결과 및 참조 기사 확인

## 📊 성능 최적화

### 1. 배치 처리
- **XML 파싱**: 100개/배치
- **임베딩 생성**: 50개/배치
- **병렬 처리**: 최대 10개 워커

### 2. 캐싱 전략
- **임베딩 캐싱**: 중복 계산 방지
- **검색 결과 캐싱**: 빠른 응답
- **메타데이터 캐싱**: 효율적인 필터링

### 3. 리소스 관리
- **메모리 최적화**: 배치 크기 조정
- **CPU 활용**: 멀티프로세싱
- **네트워크 최적화**: 비동기 처리

## 🔒 보안 고려사항

### 1. API 키 관리
- **환경 변수**: .env 파일 활용
- **암호화**: 민감한 정보 보호
- **접근 제어**: 관리자 권한 필요

### 2. 데이터 보호
- **개인정보**: 기사 작성자 정보 보호
- **중복 필터링**: 동일 콘텐츠 중복 처리 방지
- **로그 관리**: 처리 로그 보안

## 📞 지원 및 문의

- **이메일**: godwind2015@gmail.com
- **프로젝트**: MK AI Project (godwind2015)
- **문서**: README.md, PROJECT_SUMMARY.md 참조

---

**매일경제 신문기사 벡터임베딩 플랫폼**  
GCP VertexAI 기반 Hybrid RAG 시스템  
MK AI Project - godwind2015@gmail.com

